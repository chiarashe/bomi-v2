<h1>Daily report</h1>

<div class="container" data-controller="questions">
  <%= form_with(model: [@patient, @report], local: true) do |form| %>
    <%= form.label :date %>
    <%= form.date_field :date %>

    <div class="d-flex flex-column">
      <%= form.fields_for :answers do |answer_fields| %>
        <%= answer_fields.hidden_field :question_id %>
        <%= answer_fields.label :text, Question.find(answer_fields.object.question.id).title %>
        <% if answer_fields.object.question_id == 2 %>
          <%= answer_fields.select :text, ["SÃ­", "No"], {}, { class: "form-control", data: { action: "change->questions#checkQuestion2", "questions-target": "question2" } }%>
        <% elsif answer_fields.object.question_id == 3 %>
          <div data-questions-target="question3" class="d-none">
            <%= answer_fields.text_field :text %>
          </div>
        <% elsif answer_fields.object.question_id == 4 %>
          <%= answer_fields.select :text, ["SÃ­", "No"], {}, { class: "form-control", data: { action: "change->questions#checkQuestion4", "questions-target": "question4" } }%>
        <% elsif answer_fields.object.question_id == 5 %>
          <div data-questions-target="question5" class="d-none">
            <%= answer_fields.text_field :text %>
          </div>
        <% elsif answer_fields.object.question_id == 1 %>
          <%= answer_fields.select :text, ["Desayuno", "Snack", "Comida", "Cena"], {}, { class: "form-control" } %>
        <% elsif answer_fields.object.question_id == 6 %>
          <% options = [
            { emoji: 'ðŸ˜ƒ', text: 'Feliz' },
            { emoji: 'ðŸ˜Š', text: 'Tranquilo/a' },
            { emoji: 'ðŸ¤©', text: 'Con energÃ­a' },
            { emoji: 'ðŸ¤”', text: 'Curioso/a' },
            { emoji: 'ðŸ§', text: 'Inspirado/a' },
            { emoji: 'ðŸ™‚', text: 'Capaz' },
            { emoji: 'ðŸ˜', text: 'Satisfecho/a' },
            { emoji: 'ðŸ˜¢', text: 'Triste' },
            { emoji: 'ðŸ˜´', text: 'Cansado/a' },
            { emoji: 'ðŸ˜•', text: 'Confundido/a' },
            { emoji: 'ðŸ˜ ', text: 'Enojado/a' },
            { emoji: 'ðŸ˜£', text: 'Ansioso/a' },
            { emoji: 'ðŸ˜’', text: 'CrÃ­tico/a' },
            { emoji: 'ðŸ˜–', text: 'Irritado/a' },
            { emoji: 'ðŸ˜‘', text: 'Aburrido/a' },
            { emoji: 'ðŸ˜¥', text: 'Estresado/a' },
            { emoji: 'ðŸ˜', text: 'ApÃ¡tico/a' },
          ] %>

          <% options.each_with_index do |option, i| %>
          <div class="form-check form-check-inline">
            <%= answer_fields.check_box :text, { multiple: true, id: "option_#{i}" }, option[:text], nil %>
            <label class="form-check-label" for="option_<%= i %>">
              <%= option[:emoji] %> <%= option[:text] %>
            </label>
          </div>
        <% end %>

          <% elsif answer_fields.object.question_id == 7 %>
            <%= answer_fields.select :text, ["Solo/a", "Pareja", "Familia", "Amigo/a(s)", "CompaÃ±ero/a(s) de trabajo/escuela", "Grupo", "Otro"], {}, class: "form-control" %>
          <% elsif answer_fields.object.question_id == 8 %>
              <%= answer_fields.select :text, options_for_select((1..10).map { |i| ["#{i} - #{['Hambre extrema ðŸ˜«', 'Mucha hambre ðŸ˜¤', 'Hambre ðŸ˜‹', 'Poca hambre ðŸ¤”', 'Neutral ðŸ˜', 'Casi lleno/a ðŸ˜Œ', 'lleno/a y Satisfecho/a ðŸ˜¬', 'Muy lleno/a ðŸ˜¨', 'Muy lleno/a e Incomodo/a ðŸ˜“', 'Satrurado/a ðŸ¤¢'][i-1]}", i] }), {}, class: "form-control" %>
          <% elsif answer_fields.object.question_id == 9 %>
            <%= answer_fields.select :text, options_for_select((1..10).map { |i| ["#{i} - #{['Hambre extrema ðŸ˜«', 'Mucha hambre ðŸ˜¤', 'Hambre ðŸ˜‹', 'Poca hambre ðŸ¤”', 'Neutral ðŸ˜', 'Casi lleno/a ðŸ˜Œ', 'lleno/a y Satisfecho/a ðŸ˜¬', 'Muy lleno/a ðŸ˜¨', 'Muy lleno/a e Incomodo/a ðŸ˜“', 'Satrurado/a ðŸ¤¢'][i-1]}", i] }), {}, class: "form-control" %>
          <% elsif answer_fields.object.question_id == 10 %>
            <%= answer_fields.select :text, ["SÃ­", "No"], {}, class: "form-control" %>
          <% else %>
            <%= answer_fields.hidden_field :question_id, value: 11 %>
            <%= answer_fields.text_field :text %>
          <% end %>
                <% end %>
    </div>

    <%= form.submit %>
  <% end %>
</div>
